import{initializeApp as m}from"https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";import{getAnalytics as g}from"https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";import{getAuth as h,fetchSignInMethodsForEmail as y,createUserWithEmailAndPassword as A,signInWithEmailAndPassword as w,onAuthStateChanged as I,signOut as O}from"https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";import{getFirestore as P,setDoc as b,doc as f,serverTimestamp as d,getDoc as L,addDoc as l,collection as p}from"https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const C={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0,databaseURL:void 0},u=m(C);let E;try{E=g(u)}catch{}const o=h(u),a=P(u);async function F(n,t,i){const s=await A(o,n,t),e=s.user;return await b(f(a,"users",e.uid),{uid:e.uid,email:n,role:i,createdAt:d()}),s}async function M(n,t){return await w(o,n,t)}async function N(){return await O(o)}async function U(n){const t=await y(o,n);return t&&t.length>0}function W(n){return I(o,async t=>{if(!t)return n(null);const i=await L(f(a,"users",t.uid)),s=i.exists()?i.data():null;n({user:t,profile:s})})}async function x(n){return(await l(p(a,"cases"),{...n,status:n.status||"pending",createdAt:d()})).id}async function K(n,t,i){const s=`chats/${n}/messages`;return(await l(p(a,s),{from:t,text:i,createdAt:d()})).id}export{M as a,N as b,x as c,a as d,K as e,o as f,U as i,W as o,F as s};
