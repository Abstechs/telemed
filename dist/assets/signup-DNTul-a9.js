import{i as c,s as u}from"./app-BBxhuRp7.js";import"https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";import"https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";import"https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";const m=document.getElementById("signupForm"),s=document.getElementById("submitBtn"),d=document.getElementById("btnText");function n(t,a=!0){Toastify({text:t,duration:3500,gravity:"top",position:"right",backgroundColor:a?"#16a34a":"#dc2626"}).showToast()}async function r(t){t?(d.innerHTML='<span class="loader" aria-hidden="true"></span> Creating...',s.disabled=!0,s.classList.add("opacity-70")):(d.innerHTML='<i class="fa-solid fa-user-plus"></i> Sign up',s.disabled=!1,s.classList.remove("opacity-70"))}m.addEventListener("submit",async t=>{t.preventDefault();const a=document.getElementById("email").value.trim(),o=document.getElementById("password").value.trim(),i=document.getElementById("role").value;if(!a||!o||!i){n("Please fill all fields",!1);return}await r(!0);try{if(await c(a)){n("Email already registered. Try logging in.",!1),r(!1);return}const l=await u(a,o,i);n("Signup successful! Redirecting...",!0),setTimeout(()=>{i==="patient"?window.location.href="/patient.html":i==="labtech"?window.location.href="/staff.html":window.location.href="/"},1200)}catch(e){console.error(e);const l=e&&e.code?(()=>{switch(e.code){case"auth/invalid-email":return"Invalid email address.";case"auth/weak-password":return"Password too weak (min 6 chars).";case"auth/email-already-in-use":return"Email already in use.";default:return e.message||"Signup failed."}})():"Signup failed.";n(l,!1)}finally{await r(!1)}});
